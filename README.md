## Описание
Xsolla Summer School 2020 BE. [Итоговое задание](https://github.com/p-sanachev/summer-school-be-2020-final).

Разработанное приложение - API системы "Торговая площадка продажи игровых ключей".

## Состояние
![.NET Core CI](https://github.com/rs90a/xsolla-be-hw-trading-platform/workflows/.NET%20Core%20CI/badge.svg)

## Размещение в интернете
Приложение размещено на платформе Heroku и доступно по адресу - http://trading-platform-app.herokuapp.com.

По умолчанию открывается интерфейс Swagger-документации.

## Сценарии использования
1. Регистрация пользователя:
    - `role`: 0 - покупатель, 1 - продавец
    - `notificationUrl`: только для продавцов (необязательный параметр))
2. Получение токена (используется в заголовке Authorization: `Bearer  <токен>`).
3. После регистрации продавца необходимо выставить товары (игровые ключи) на продажу. 
   
   Продавцу доступны методы:
   - Получить свои товары
   - Добавить новую игру с предопределенным набором игровых ключей
   - Добавить набор игровых ключей для игры
   - Удалить игровой ключ
4. Покупка игрового ключа выполняется в 2 этапа:
   - Сначала необходимо вызвать метод для передачи сведений о заказе и получения идентификатора сессии. Если все успешно, то игровой ключ резервируется на время платежной сессии
   - Далее - метод для передачи сведений о банковской карте и идентификатора сессии
   
   Если платеж выполнен успешно:
   - Игровой ключ удаляется из общего набора
   - Покупателю игровой ключ высылается на Email
   - Продавцу отправляется уведомление о продаже (пока без механизма гарантированной доставки, не успел сделать) с информацией о заказе, доходе, комиссии и др.
   - Сохраняются сведения о заказе
   - Выполняется начисление денежных средств площадке, продавцу с учетом комиссии
